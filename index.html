<!DOCTYPE html>
<html lang="en">
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />

    <link rel="preconnect" href="https://fonts.googleapis.com/" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Azeret+Mono&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Azeret+Mono:wght@700&amp;display=swap"
      rel="stylesheet"
    />

    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="assets/favicons/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="assets/favicons/favicon-32x32.png%20favicon-32x32.html"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/favicons/favicon-16x16.png%20favicon-16x16.html"
    />
    <link rel="manifest" href="assets/favicons/site.webmanifest" />
    <link
      rel="mask-icon"
      href="assets/favicons/safari-pinned-tab.svg"
      color="#000000"
    />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" href="../cdn.plyr.io/3.7.8/plyr.css" />

    <link href="assets/dist/build.min.css" rel="stylesheet" />

    <link rel="canonical" href="index.html" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="DubaiFilmMaker – Homepage" />
    <meta property="og:site_name" content="Poster" />
    <meta property="og:url" content="index.html" />
    <meta name="twitter:title" content="DubaiFilmMaker – Homepage" />
    <meta name="twitter:card" content="summary_large_image" />

    <meta
      name="description"
      content="Post-Production company based in the heart of Paris, dedicated to audiovisual production, advertisement, digital content, music video feature films & documentaries."
    />
    <meta
      property="og:description"
      content="Post-Production company based in the heart of Paris, dedicated to audiovisual production, advertisement, digital content, music video feature films & documentaries."
    />

    <title>DubaiFilmMaker – Homepage</title>

    <style>
      /* Fix video thumbnail aspect ratio - prevent squishing */
      .bloc-projects-listing
        .box--work__video.video-wrapper.has-poster
        img.video-img-poster {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        object-position: center !important;
      }

      /* Ensure video wrapper maintains proper dimensions */
      .bloc-projects-listing .box--work__video.video-wrapper {
        position: relative !important;
        overflow: hidden !important;
      }

      /* Header styles loaded from data/header.json - prevent FOUC */
      .header__logo {
        object-fit: contain !important;
        height: auto !important;
        opacity: 0;
        transition: opacity 0.15s ease-in;
      }
      
      .header__logo.loaded {
        opacity: 1;
      }
    </style>
    
    <!-- Critical header CSS - loads synchronously to prevent FOUC -->
    <script>
      (function() {
        // Synchronous XHR to load config before page renders
        try {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', '/data/header.json', false); // false = synchronous
          xhr.send();
          
          if (xhr.status === 200) {
            var config = JSON.parse(xhr.responseText);
            var preset = config.activePreset || 'default';
            var presetConfig = config.presets[preset];
            
            if (presetConfig) {
              // Store for later use by site-config.js
              window.__headerConfig = config;
              window.__headerPreset = presetConfig;
              window.__headerPresetName = preset;
              
              // Inject critical CSS immediately
              var style = document.createElement('style');
              style.id = 'header-critical-css';
              style.textContent = generateHeaderCSS(presetConfig);
              document.head.appendChild(style);
              
              // Update logo src immediately when DOM is ready
              if (presetConfig.logo && presetConfig.logo.src) {
                document.addEventListener('DOMContentLoaded', function() {
                  var logos = document.querySelectorAll('.header__logo');
                  logos.forEach(function(logo) {
                    logo.src = presetConfig.logo.src;
                    if (presetConfig.logo.alt) {
                      logo.alt = presetConfig.logo.alt;
                    }
                    // Show logo after src is updated
                    logo.classList.add('loaded');
                  });
                });
              }
              
              console.log('✓ Critical header CSS loaded synchronously:', preset);
            }
          }
        } catch (e) {
          console.warn('Could not load header config synchronously:', e);
        }
        
        function generateHeaderCSS(preset) {
          var css = '';
          
          // Mobile styles
          if (preset.mobile) {
            css += '@media (max-width: 767px) {';
            css += 'html body.template-projects .app-container .header .header__nav, html body.template-homepage .app-container .header .header__nav, html body.template-about .app-container .header .header__nav, html body.template-contact .app-container .header .header__nav {';
            css += 'display: flex !important;';
            css += 'align-items: ' + preset.mobile.headerNav.alignItems + ' !important;';
            css += 'padding: ' + preset.mobile.headerNav.padding + ' !important;';
            css += 'min-height: ' + preset.mobile.headerNav.minHeight + ' !important;';
            if (preset.mobile.headerNav.flexDirection) css += 'flex-direction: ' + preset.mobile.headerNav.flexDirection + ' !important;';
            if (preset.mobile.headerNav.justifyContent) css += 'justify-content: ' + preset.mobile.headerNav.justifyContent + ' !important;';
            if (preset.mobile.headerNav.gap) css += 'gap: ' + preset.mobile.headerNav.gap + ' !important;';
            if (preset.mobile.headerNav.width) css += 'width: ' + preset.mobile.headerNav.width + ' !important;';
            css += '}';
            
            css += 'html body.template-projects .app-container .header .header__nav .logo-link, html body.template-homepage .app-container .header .header__nav .logo-link, html body.template-about .app-container .header .header__nav .logo-link, html body.template-contact .app-container .header .header__nav .logo-link {';
            css += 'display: flex !important; align-items: center !important;';
            if (preset.mobile.logoLink.maxWidth) css += 'max-width: ' + preset.mobile.logoLink.maxWidth + ' !important;';
            if (preset.mobile.logoLink.flex) css += 'flex: ' + preset.mobile.logoLink.flex + ' !important;';
            if (preset.mobile.logoLink.flexShrink) css += 'flex-shrink: ' + preset.mobile.logoLink.flexShrink + ' !important;';
            if (preset.mobile.logoLink.paddingRight) css += 'padding-right: ' + preset.mobile.logoLink.paddingRight + ' !important;';
            if (preset.mobile.logoLink.width) css += 'width: ' + preset.mobile.logoLink.width + ' !important;';
            if (preset.mobile.logoLink.margin) css += 'margin: ' + preset.mobile.logoLink.margin + ' !important;';
            css += '}';
            
            css += 'html body.template-projects .app-container .header .header__nav .logo-link .header__logo, html body.template-homepage .app-container .header .header__nav .logo-link .header__logo, html body.template-about .app-container .header .header__nav .logo-link .header__logo, html body.template-contact .app-container .header .header__nav .logo-link .header__logo {';
            css += 'display: block !important;';
            css += 'max-height: ' + preset.mobile.logo.maxHeight + ' !important;';
            css += 'max-width: ' + preset.mobile.logo.maxWidth + ' !important;';
            css += 'width: ' + preset.mobile.logo.width + ' !important;';
            css += preset.mobile.logo.margin ? 'margin: ' + preset.mobile.logo.margin + ' !important;' : 'margin: 0 !important;';
            css += '}';
            
            css += 'html body.template-projects .app-container .header .header__nav .btn--menu, html body.template-homepage .app-container .header .header__nav .btn--menu, html body.template-about .app-container .header .header__nav .btn--menu, html body.template-contact .app-container .header .header__nav .btn--menu { flex-shrink: 0 !important; margin: 0 !important; }';
            css += '}';
          }
          
          // Desktop styles
          if (preset.desktop) {
            css += '@media (min-width: 768px) {';
            if (preset.desktop.headerNav) {
              css += 'html body.template-projects .app-container .header .header__nav, html body.template-homepage .app-container .header .header__nav, html body.template-about .app-container .header .header__nav, html body.template-contact .app-container .header .header__nav {';
              css += 'display: flex !important;';
              if (preset.desktop.headerNav.flexDirection) css += 'flex-direction: ' + preset.desktop.headerNav.flexDirection + ' !important;';
              if (preset.desktop.headerNav.justifyContent) css += 'justify-content: ' + preset.desktop.headerNav.justifyContent + ' !important;';
              if (preset.desktop.headerNav.gap) css += 'gap: ' + preset.desktop.headerNav.gap + ' !important;';
              if (preset.desktop.headerNav.alignItems) css += 'align-items: ' + preset.desktop.headerNav.alignItems + ' !important;';
              if (preset.desktop.headerNav.width) css += 'width: ' + preset.desktop.headerNav.width + ' !important;';
              if (preset.desktop.headerNav.minHeight) css += 'min-height: ' + preset.desktop.headerNav.minHeight + ' !important;';
              css += '}';
            }
            
            if (preset.desktop.logoLink) {
              css += 'html body.template-projects .app-container .header .header__nav .logo-link, html body.template-homepage .app-container .header .header__nav .logo-link, html body.template-about .app-container .header .header__nav .logo-link, html body.template-contact .app-container .header .header__nav .logo-link {';
              if (preset.desktop.logoLink.width) css += 'width: ' + preset.desktop.logoLink.width + ' !important;';
              if (preset.desktop.logoLink.flexShrink) css += 'flex-shrink: ' + preset.desktop.logoLink.flexShrink + ' !important;';
              if (preset.desktop.logoLink.margin) css += 'margin: ' + preset.desktop.logoLink.margin + ' !important;';
              css += '}';
            }
            
            css += 'html body.template-projects .app-container .header .header__nav .logo-link .header__logo, html body.template-homepage .app-container .header .header__nav .logo-link .header__logo, html body.template-about .app-container .header .header__nav .logo-link .header__logo, html body.template-contact .app-container .header .header__nav .logo-link .header__logo {';
            css += 'display: block !important;';
            css += 'max-height: ' + preset.desktop.logo.maxHeight + ' !important;';
            css += 'width: ' + preset.desktop.logo.width + ' !important;';
            if (preset.desktop.logo.margin) css += 'margin: ' + preset.desktop.logo.margin + ' !important;';
            css += '}';
            css += '}';
          }
          
          // Extra large styles
          if (preset.extraLarge) {
            css += '@media (min-width: 1200px) {';
            css += 'html body.template-projects .app-container .header .header__nav .logo-link .header__logo, html body.template-homepage .app-container .header .header__nav .logo-link .header__logo, html body.template-about .app-container .header .header__nav .logo-link .header__logo, html body.template-contact .app-container .header .header__nav .logo-link .header__logo {';
            css += 'max-height: ' + preset.extraLarge.logo.maxHeight + ' !important;';
            css += '}';
            css += '}';
          }
          
          return css;
        }
      })();
    </script>
  </head>
  <body class="template-homepage">
    <main class="main">
      <div class="app-container">
        <div class="app-container-inner">
          <header class="header">
            <div class="header__nav">
              <a href="index" data-navigo class="logo-link">
                <img
                  class="header__logo"
                  src="assets/img/version_2/dubaifilmmaker.svg"
                  alt="Poster"
                />
              </a>
              <a href="#main_menu" class="btn btn--menu">
                <span>menu.</span>
              </a>
            </div>

            <div class="header__navigations-wrapper">
              <nav id="main_menu" class="header__subnav">
                <ul>
                  <li data-slug="homepage">
                    <a
                      data-navigo
                      data-slug="homepage"
                      aria-current="page"
                      class="force-active"
                      href="#"
                    >
                      Homepage
                    </a>
                  </li>
                  <li data-slug="works">
                    <a data-navigo data-slug="works" href="works"> Works </a>
                  </li>
                  <li data-slug="about">
                    <a data-navigo data-slug="about" href="about"> About </a>
                  </li>
                  <li data-slug="contact">
                    <a data-navigo data-slug="contact" href="contact">
                      Contact
                    </a>
                  </li>
                </ul>
              </nav>

              <div class="projects-nav">
                <ul class="list list--cat">
                  <li>
                    <a href="#works" class="js-filter-cat" data-cat="*">all</a>
                  </li>
                  <li>
                    <a
                      href="#works"
                      class="js-filter-cat"
                      data-cat="*"
                      >TVC / Brand Films</a
                    >
                  </li>

                   <li>
                    <a
                      href="#works"
                      class="js-filter-cat"
                      data-cat="*"
                      >Narrative Films</a
                    >
                  </li>
  
                </ul>
              </div>
            </div>
          </header>
          <div class="page-inner-content">
            <div class="homepage-inner-wrapper">
              <h1 class="hidden">Poster</h1>
              <!-- 
              <div class="bloc-intro">
                <div class="intro-anim-surwrapper">
                  <div class="intro-anim-wrapper">
                    <div
                      class="intro-anim"
                      data-animation="assets/img/intro-animation.json"
                    ></div>
                  </div>
                </div>
                <div class="intro-timeline"><div class="inner"></div></div>
              </div> -->

              <div class="box box--home">
                <div class="box--home__info">
                  <div class="box--home__info__counter"><span>1</span>/7</div>

                  <ul class="list list--home js-has-cursor-player">
                    <div
                      class="cursor-player-animated js-cursor-player-animated"
                    >
                      <div
                        class="mooving-elements players-wrapper is-player"
                        data-friction="7"
                      >
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_981846f43f714f73845393b8c1d66a5f/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_91dd4962f3be4c0592b5e1c7ec6f397e/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_4b66a34c69754d2585da905ba36ca85b/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_407b1dbffc774b7ba45d6c4c9cd43896/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_8d2edc77f66e4a18825ff08edc9c549c/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_8d2edc77f66e4a18825ff08edc9c549c/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                        <video
                          class="js-video player-animated-player"
                          data-src="https://video.wixstatic.com/video/8c2c22_13c6aa4d9ebb4e6d9e591dcaaa7cb89e/720p/mp4/file.mp4"
                          playsinline
                          loop
                          muted
                        ></video>
                      </div>
                    </div>

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/live-hd-en"
                        class="js-change-video"
                      >
                        <h2>LIVE HD</h2>
                        <p>Abu Dhabi Media</p>
                        <p>Broadcast / Live TV</p>
                      </a>
                    </li> -->

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/shams-en"
                        class="js-change-video"
                      >
                        <h2>SHAMS</h2>
                        <p>Sharjah Media City</p>
                        <p>Corporate / Media</p>
                      </a>
                    </li> -->

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/keep-the-dreams-alive-tvc03-en7b6fba23b054b/1080p/mp4/file.mp4"
                        class="js-change-video"
                      >
                        <h2>KEEP THE DREAMS ALIVE TVC 03</h2>
                        <p>Ministry of Interior UAE</p>
                        <p>Government / Public Awareness TVC</p>
                      </a>
                    </li> -->

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/keep-the-dreams-alive-tvc02-en"
                        class="js-change-video"
                      >
                        <h2>KEEP THE DREAMS ALIVE TVC 02</h2>
                        <p>Ministry of Interior UAE</p>
                        <p>Government / Public Awareness TVC</p>
                      </a>
                    </li> -->

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/keep-the-dreams-alive-tvc01-en"
                        class="js-change-video"
                      >
                        <h2>KEEP THE DREAMS ALIVE TVC 01</h2>
                        <p>Ministry of Interior UAE</p>
                        <p>Government / Public Awareness TVC</p>
                      </a>
                    </li> -->

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/time-to-care-army-cut-en"
                        class="js-change-video"
                      >
                        <h2>TIME TO CARE: ARMY CUT</h2>
                        <p>Ministry of Health & Prevention UAE</p>
                        <p>Health Awareness Campaign</p>
                      </a>
                    </li> -->

                    <!-- <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/time-to-care-main-film-en"
                        class="js-change-video"
                      >
                        <h2>TIME TO CARE: MAIN FILM</h2>
                        <p>Ministry of Health & Prevention UAE</p>
                        <p>Health Awareness Campaign</p>
                      </a>
                    </li> -->

                    <li class="is-active">
                      <a
                        href="https://www.dubaifilmmaker.ae/moving-forward-en"
                        class="js-change-video"
                      >
                        <h2>MOVING FORWARD</h2>
                        <p>
                          SHUROOQ - Sharjah Investment and Development Authority
                        </p>
                        <p>Corporate / Investment Promotion</p>
                      </a>
                    </li>

                    <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/setup-your-business-en"
                        class="js-change-video"
                      >
                        <h2>SETUP YOUR BUSINESS</h2>
                        <p>Dubai Economy and Tourism</p>
                        <p>Business Promotion / Government Service</p>
                      </a>
                    </li>

                    <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/impossible-to-define-en"
                        class="js-change-video"
                      >
                        <h2>IMPOSSIBLE TO DEFINE</h2>
                        <p>Dubai Economy and Tourism</p>
                        <p>Tourism Campaign</p>
                      </a>
                    </li>

                    <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/invest-in-sharjah-en"
                        class="js-change-video"
                      >
                        <h2>INVEST IN SHARJAH</h2>
                        <p>Invest in Sharjah Office</p>
                        <p>Corporate / Investment Promotion</p>
                      </a>
                    </li>

                    <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/the-abu-dhabi-plan-faisal-cutdown-en"
                        class="js-change-video"
                      >
                        <h2>THE ABU DHABI PLAN - FAISAL</h2>
                        <p>Abu Dhabi Executive Council</p>
                        <p>Government / Strategic Communication</p>
                      </a>
                    </li>

                    <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/the-abu-dhabi-plan-reem-cutdown-en"
                        class="js-change-video"
                      >
                        <h2>THE ABU DHABI PLAN - REEM</h2>
                        <p>Abu Dhabi Executive Council</p>
                        <p>Government / Strategic Communication</p>
                      </a>
                    </li>

                    <li class="">
                      <a
                        href="https://www.dubaifilmmaker.ae/the-abu-dhabi-plan-en"
                        class="js-change-video"
                      >
                        <h2>THE ABU DHABI PLAN</h2>
                        <p>Abu Dhabi Executive Council</p>
                        <p>Government / Strategic Communication</p>
                      </a>
                    </li>
                  </ul>
                  <div class="box--home__timeline">
                    <span class="is-animated"></span>
                  </div>
                </div>

                <a
                  href="https://www.dubaifilmmaker.ae/live-hd-en"
                  data-navigo
                  class="box--home__link js-has-cursor-text"
                >
                  <div class="box--home__wrapper video-wrapper">
                    <!-- <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_6a6d059dec74414c92a97a951caafb24/1080p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video> -->

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_981846f43f714f73845393b8c1d66a5f/1080p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_91dd4962f3be4c0592b5e1c7ec6f397e/720p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_4b66a34c69754d2585da905ba36ca85b/1080p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_407b1dbffc774b7ba45d6c4c9cd43896/1080p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_8d2edc77f66e4a18825ff08edc9c549c/720p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_8d2edc77f66e4a18825ff08edc9c549c/720p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>

                    <video
                      class="js-main-video"
                      data-src="https://video.wixstatic.com/video/8c2c22_13c6aa4d9ebb4e6d9e591dcaaa7cb89e/720p/mp4/file.mp4"
                      muted
                      playsinline
                    ></video>
                  </div>
                  <div class="cursor-text-animated js-cursor-text-animated">
                    <div class="mooving-elements is-arrow" data-friction="1">
                      <svg
                        width="11"
                        height="10"
                        viewBox="0 0 11 10"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M8.72366 3.91174H7.0685L5.14349 3.8482L6.53777 4.99985L8.40882 6.65189L7.19444 7.72412L5.3234 6.07209L4.01007 4.83306L4.07303 6.50892L4.06404 8.02593L2.3819 6.54069L2.39989 2.42649L7.04152 2.42649L8.72366 3.91174Z"
                          fill="white"
                        />
                      </svg>
                    </div>
                    <div
                      class="mooving-elements shift cursor-main-text"
                      data-friction="5"
                    >
                      open LIVE HD
                    </div>
                  </div>
                </a>

                <div class="box--home__buttons-mobile">
                  <a
                    href="https://www.dubaifilmmaker.ae/live-hd-en"
                    data-navigo
                    class="mobile-link"
                    >view project</a
                  >
                  <div class="arrows">
                    <button class="arrow-prev">←</button>
                    <button class="arrow-next">→</button>
                  </div>
                </div>
              </div>

              <div class="bloc-projects-listing">
                <ul id="works" class="list list--works">
                  <!-- Projects will be loaded from JSON -->
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!--  -->

    <script src="assets/dist/build.min.js"></script>
    <script src="assets/js/site-config.js"></script>

    <script>
      // Load and render projects from JSON on index page
      async function loadIndexProjects() {
        try {
          console.log('Loading projects for index page...');
          const response = await fetch('data/project.json');
          const data = await response.json();
          renderIndexProjects(data.projects);
        } catch (error) {
          console.error('Error loading projects:', error);
        }
      }

      function renderIndexProjects(projects) {
        console.log('Rendering projects for index page...');
        const worksContainer = document.getElementById('works');

        // Clear existing content first to avoid duplicates
        if (worksContainer) {
          worksContainer.innerHTML = '';
        }

        projects.forEach(project => {
          const projectHTML = `
          <li class="box box--work" data-cat="${project.data_cat}">
            <a href="${project.link}" data-navigo class="box--work__link js-has-cursor-text">
              <div class="box--work__info">
                <h2>${project.title}</h2>
                <p>${project.client}</p>
                <p>${project.category}</p>
              </div>
              <div class="box--work__video video-wrapper has-poster">
                <img class="video-img-poster lazy-media loaded"
                  src="${project.poster_image}"
                  srcset="${project.poster_image_srcset}"
                  alt="">
                <video class="js-video lazy-media loaded"
                 src="${project.video_url}"
                  playsinline loop muted></video>
              </div>
              <div class="cursor-text-animated js-cursor-text-animated">
                <div class="mooving-elements is-arrow" data-friction="1">
                  <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.72366 3.91174H7.0685L5.14349 3.8482L6.53777 4.99985L8.40882 6.65189L7.19444 7.72412L5.3234 6.07209L4.01007 4.83306L4.07303 6.50892L4.06404 8.02593L2.3819 6.54069L2.39989 2.42649L7.04152 2.42649L8.72366 3.91174Z" fill="white"/>
                  </svg>
                </div>
                <div class="mooving-elements shift cursor-main-text" data-friction="5">
                  <h2>${project.title}</h2>
                  <p>${project.client}</p>
                  <p>${project.category}</p>
                </div>
              </div>
            </a>
          </li>
        `;

          console.log('Adding project:', project.title);
          worksContainer.innerHTML += projectHTML;
        });
      }

      // Function to check if we need to load projects
      function checkAndLoadIndexProjects() {
        const worksContainer = document.getElementById('works');
        if (worksContainer && worksContainer.children.length === 0) {
          console.log('Loading index projects...');
          loadIndexProjects();
        }
      }

      // Load projects when the page loads
      document.addEventListener('DOMContentLoaded', checkAndLoadIndexProjects);

      // Also load projects when the page becomes visible (for client-side routing)
      document.addEventListener('visibilitychange', function () {
        if (!document.hidden) {
          setTimeout(checkAndLoadIndexProjects, 100);
        }
      });

      // Load projects when window gains focus (backup for routing)
      window.addEventListener('focus', function () {
        setTimeout(checkAndLoadIndexProjects, 100);
      });

      // Check periodically if we're on index page but no projects loaded
      setInterval(function () {
        if (
          window.location.pathname === '/' ||
          window.location.pathname.includes('index')
        ) {
          checkAndLoadIndexProjects();
        }
      }, 1000);

      // === WORKS PAGE FUNCTIONALITY ===
      // Load and render projects for works page
      async function loadWorksProjects() {
        try {
          console.log('Loading projects for works page...');
          const response = await fetch('data/project.json');
          const data = await response.json();
          renderWorksProjects(data.projects);
        } catch (error) {
          console.error('Error loading works projects:', error);
        }
      }

      function renderWorksProjects(projects) {
        console.log('Rendering projects for works page...');
        const worksContainer = document.getElementById('works-list-project');

        if (!worksContainer) {
          console.log('Works container not found');
          return;
        }

        // Clear existing content first to avoid duplicates
        worksContainer.innerHTML = '';

        projects.forEach(project => {
          const projectHTML = `
          <li class="box box--work" data-cat="${project.data_cat}">
            <a href="${project.link}" data-navigo class="box--work__link js-has-cursor-text">
              <div class="box--work__info">
                <h2>${project.title}</h2>
                <p>${project.client}</p>
                <p>${project.category}</p>
              </div>
              <div class="box--work__video video-wrapper has-poster">
                <img class="video-img-poster lazy-media loaded"
                  src="${project.poster_image}"
                  srcset="${project.poster_image_srcset}"
                  alt="">
                <video class="js-video lazy-media loaded"
                  src="${project.video_url}"
                  playsinline loop muted></video>
              </div>
              <div class="cursor-text-animated js-cursor-text-animated">
                <div class="mooving-elements is-arrow" data-friction="1">
                  <svg width="11" height="10" viewBox="0 0 11 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8.72366 3.91174H7.0685L5.14349 3.8482L6.53777 4.99985L8.40882 6.65189L7.19444 7.72412L5.3234 6.07209L4.01007 4.83306L4.07303 6.50892L4.06404 8.02593L2.3819 6.54069L2.39989 2.42649L7.04152 2.42649L8.72366 3.91174Z" fill="white"/>
                  </svg>
                </div>
                <div class="mooving-elements shift cursor-main-text" data-friction="5">
                  <h2>${project.title}</h2>
                  <p>${project.client}</p>
                  <p>${project.category}</p>
                </div>
              </div>
            </a>
          </li>
        `;

          console.log('Adding works project:', project.title);
          worksContainer.innerHTML += projectHTML;
        });
      }

      // Function to check if we need to load works projects
      function checkAndLoadWorksProjects() {
        console.log(
          'checkAndLoadWorksProjects called, current path:',
          window.location.pathname
        );
        const worksContainer = document.getElementById('works-list-project');
        console.log('Works container found:', !!worksContainer);
        console.log(
          'Container children count:',
          worksContainer ? worksContainer.children.length : 'N/A'
        );

        if (worksContainer && worksContainer.children.length === 0) {
          console.log('Loading works projects...');
          loadWorksProjects();
        } else if (worksContainer) {
          console.log('Works projects already loaded');
        }
      }

      // Check for both pages periodically
      setInterval(function () {
        if (window.location.pathname.includes('/works')) {
          checkAndLoadWorksProjects();
        }
      }, 1000);

      // Listen for route changes
      let lastPath = window.location.pathname;
      setInterval(function () {
        if (window.location.pathname !== lastPath) {
          console.log(
            'Route changed from',
            lastPath,
            'to',
            window.location.pathname
          );
          lastPath = window.location.pathname;

          // Load appropriate projects based on current route
          setTimeout(function () {
            if (window.location.pathname.includes('/works')) {
              checkAndLoadWorksProjects();
            } else if (
              window.location.pathname === '/' ||
              window.location.pathname.includes('index')
            ) {
              checkAndLoadIndexProjects();
            }
          }, 200);
        }
      }, 100);

      // Expose works functions globally for debugging
      window.loadWorksProjects = loadWorksProjects;
      window.checkAndLoadWorksProjects = checkAndLoadWorksProjects;



     
      // Update the main route change listener to handle all pages
      let lastPath2 = window.location.pathname;
      setInterval(function () {
        if (window.location.pathname !== lastPath2) {
          console.log(
            'Route changed from',
            lastPath2,
            'to',
            window.location.pathname
          );
          lastPath2 = window.location.pathname;

          // Load appropriate content based on current route
          setTimeout(function () {
            if (window.location.pathname.includes('/works')) {
              checkAndLoadWorksProjects();
            } else if (
              window.location.pathname === '/' ||
              window.location.pathname.includes('index')
            ) {
              checkAndLoadIndexProjects();
            } else if (window.location.pathname.includes('/about')) {
              checkAndLoadAboutContent();
            } else if (window.location.pathname.includes('/contact')) {
              checkAndLoadContactContent();
            }
          }, 200);
        }
      }, 100);

      // Expose all functions globally for debugging
      // window.loadAboutContent = loadAboutContent;
      // window.loadContactContent = loadContactContent;
      // window.checkAndLoadAboutContent = checkAndLoadAboutContent;
      // window.checkAndLoadContactContent = checkAndLoadContactContent;
    </script>
  </body>
</html>
